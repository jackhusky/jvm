# 执行引擎

## 执行引擎的作用和工作过程

JVM的主要任务是负责**装在字节码到其内部**，但字节码并不能直接运行在操作系统上，因为字节码指令并不等价于本地机器指令，它内部包含的仅仅只是一些能够被JVM所识别的字节码指令、符号表以及其他辅助信息。

如果想要一个Java程序运行起来，执行引擎（Execution Engine

）的任务就是**将字节码指令解释/编译为对应平台上的本地机器指令才可以**。简单来说，JVM中的执行引擎充当了将高级语言翻译为机器语言的译者。

![执行引擎的工作过程](https://github.com/jackhusky/jvm/blob/main/docs/images/执行引擎的工作过程.png)

## Java代码编译和执行的过程

![java代码编译和执行过程](https://github.com/jackhusky/jvm/blob/main/docs/images/java代码编译和执行过程.png)

橙色：javac

绿色：解释的过程，逐行解释执行

蓝色：编译的过程，生成机器代码的过程

问题：什么是解释器（Interpreter），什么是JIT编译器？

解释器：当Java虚拟机启动时会根据预定义的规范对字节码采用逐行解释的方式执行，将每条字节码文件中的内容“翻译”为对应平台的本地机器指令执行。

JIT（Just In Time Compiler）编译器：就是虚拟机将源代码直接编译成和本地机器平台相关的机器语言。

问题：为什么说Java是半编译半解释型语言？

JDK1.0时代，将Java语言定义为“解释执行”还是比较准确的。再后来，Java也发展出可以直接生成本地代码的编译器。（方法区可以存储JIT代码缓存，代码频繁调用的时候，直接调用机器指令，效率高）

现在JVM在执行Java代码的时候，通常都会讲解释执行与编译执行二者结合起来进行。

